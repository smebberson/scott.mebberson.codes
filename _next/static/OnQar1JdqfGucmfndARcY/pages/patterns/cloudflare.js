(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{A9qX:function(e,n,t){"use strict";t.r(n);var a=t("q1tI"),r=t.n(a),o=(t("yhlQ"),t("h1bS")),s=(t("aOVY"),t("F1wk")),l=t("twr1"),i=t("xnUM"),c=r.a.createElement;n.default=function(){return c(s.a,{color:i.a,title:"Cloudflare"},c(o.a,null,"Maintenance pages"),c("p",null,"Using Cloudflare Workers, you can easily setup a maintenance page. When you're ready to perform some maintenance, simply add a route to the worker that will capture the domains you want to direct to the maintenance page."),c("p",null,"The following can be used as a worker template and offers the following features:"),c("ul",null,c("li",null,"Requests from developers will still go through to the origin."),c("li",null,"Specific requests (for things like logos) can still be allowed.")),c(l.a,{caption:"Worker template that will show a maintenance page to visitors.",code:"\nconst html = (ip, url) => `\n  <!doctype html>\n  <html>\n    <head>\n      <title>Maintenance</title>\n      <style>\n      html, body {\n        font-family: sans-serif;\n      }\n      body {\n        margin-top: 30px;\n        text-align: center;\n      }\n      </style>\n    </head>\n    <body>\n      \x3c!-- ip: ${ip}; url: ${url}; --\x3e\n      <img src=\"https://domain.com/img/logo.png\" width=\"200px\">\n      <h1>We'll be back soon</h1>\n      <p>We are currently performing some maintenance.</p>\n    </body>\n  </html>\n`;\n\nexport default {\n  async fetch(request, env) {\n\n    // Allow requests for developers.\n    if (request.headers.get('cf-connecting-ip') === '<your-ip>') {\n      return fetch(request);\n    }\n\n    // Allow everyone to see the logo.\n    if (request.url.includes('logo.png')) {\n      return fetch(request);\n    }\n\n    // Everyone else gets the maintenance page.\n    const headers = new Headers();\n    headers.set('Content-type', 'text/html');\n    headers.append('Pragma', 'no-cache');\n\n    return new Response(html(request.headers.get('cf-connecting-ip'), request.url), {\n      status: 503,\n      headers\n    });\n  }\n}\n            ",language:"javascript"}))}},ZHtn:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/patterns/cloudflare",function(){return t("A9qX")}])},aOVY:function(e,n,t){"use strict";var a=t("wx14"),r=t("Ff2n"),o=t("MX0m"),s=t.n(o),l=t("q1tI"),i=t.n(l).a.createElement;n.a=function(e){var n=e.children,t=Object(r.a)(e,["children"]);return i("code",Object(a.a)({},t,{className:"jsx-3161884056 "+(t&&null!=t.className&&t.className||"")}),n,i(s.a,{id:"3161884056"},["code.jsx-3161884056{color:deepPink;font-family:Menlo,Monaco,monospace,serif;font-size:0.9em;}","code.jsx-3161884056::before{content:'\\`';}","code.jsx-3161884056::after{content:'\\`';}"]))}},h1bS:function(e,n,t){"use strict";var a=t("MX0m"),r=t.n(a),o=t("q1tI"),s=t.n(o),l=s.a.createElement;n.a=function(e){var n=e.children;return l(s.a.Fragment,null,l("h2",{className:"jsx-1083602474 heading"},n),l(r.a,{id:"1083602474"},[".heading.jsx-1083602474{text-transform:uppercase;font-weight:600;}"]))}},twr1:function(e,n,t){"use strict";var a=t("bzaZ");n.a=a.a},yhlQ:function(e,n,t){"use strict";var a=t("MX0m"),r=t.n(a),o=t("q1tI"),s=t.n(o),l=s.a.createElement;n.a=function(e){var n=e.children;return l(s.a.Fragment,null,l("h2",{className:"jsx-3947944616 sub-heading"},n),l(r.a,{id:"3947944616"},[".sub-heading.jsx-3947944616{text-transform:uppercase;font-size:1.2em;font-weight:600;}"]))}}},[["ZHtn",0,2,4,1,3,5]]]);