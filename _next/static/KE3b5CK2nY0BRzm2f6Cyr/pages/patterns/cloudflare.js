(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{A9qX:function(A,e,n){"use strict";n.r(e);var t=n("q1tI"),a=n.n(t),r=n("h1bS"),s=n("F1wk"),i=n("twr1"),o=n("xnUM"),l=a.a.createElement;e.default=function(){return l(s.a,{color:o.a,title:"Cloudflare"},l(r.a,null,"Maintenance pages"),l("p",null,"Using Cloudflare Workers, you can easily setup a maintenance page. When you're ready to perform some maintenance, simply add a route to the worker that will capture the domains you want to direct to the maintenance page."),l("p",null,"The following can be used as a worker template and offers the following features:"),l("ul",null,l("li",null,"Requests from allowed IP list will go through to the origin."),l("li",null,"Uses data URIs for the favicon and logo to reduce requests.")),l(i.a,{caption:"Worker template that will show a maintenance page to visitors.",code:'\nconst html = (ip, url) => `\n  <!doctype html>\n  <html>\n    <head>\n      <title>Maintenance</title>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width; initial-scale=1.0">\n      <link rel="icon" href="data:image/vnd.microsoft.icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAHBwcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEREREREREREQAAAAAAAAARAAAAAAAAABEAAAAAAAAAEQAAAAAAAAARAAAAAAAAABEAAAEREAAAEQAAAREQAAARAAABERAAABEAAAEREAAAEQAAAAAAAAARAAAAAAAAABEAAAAAAAAAEQAAAAAAAAARAAAAAAAAABEREREREREREAAAAAf/4AAH/+AAB//gAAf/4AAH/+AAB8PgAAfD4AAHw+AAB8PgAAf/4AAH/+AAB//gAAf/4AAH/+AAAAAAAA">\n      <style>\n      html, body {\n        font-family: sans-serif;\n      }\n      body {\n        margin-top: 30px;\n        text-align: center;\n      }\n      </style>\n    </head>\n    <body>\n      \x3c!-- ip: ${ip}; url: ${url}; --\x3e\n      <img alt="logo" width="100" height="100" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAjFJREFUeF7tnEFqA1EUwyb3P3TLdDcQamKw+ARl7WdnpLRZta/run4uX8cQeCnkGBd/b0QhZ/lQyGE+3gq5f2p8cQQe3+HvfmUphJNxLymE5R3XFBIRsQGFsLzjmkIiIjagEJZ3XFNIRMQGFMLyjmsKiYjYgEJY3nFNIRERG1AIyzuuKSQiYgMKYXnHNYVERGxAISzvuKaQiIgNKITlHdcUEhGxAYWwvOOaQiIiNqAQlndcU0hExAYUwvKOawqJiNiAQljecU0hEREbUAjLO64pJCJiAwphecc1hUREbEAhLO+4ppCIiA0ohOUd1xQSEbEBhbC845pCIiI2oBCWd1xTSETEBhTC8o5rXyPk8SD/PPbpf3evkPiZZQMKYXnHNYVERGxAISzvuKaQiIgNKITlHdcUEhGxAYWwvOOaQiIiNvA1QlhsuzWF7NhWzQqpsO2OFLJjWzUrpMK2O1LIjm3VrJAK2+5IITu2VbNCKmy7I4Xs2FbNCqmw7Y4UsmNbNSukwrY7UsiObdWskArb7kghO7ZVs0IqbLsjhezYVs0KqbDtjhSyY1s1K6TCtjtSyI5t1ayQCtvuSCE7tlWzQipsuyOF7NhWzQqpsO2OFLJjWzUrpMK2O1LIjm3VrJAK2+5IITu2VbNCKmy7I4Xs2FbNCqmw7Y4UsmNbNSukwrY7UsiObdWskArb7kghO7ZVs0IqbLujKGQ3bXMkcP8/woeheGFgSkAhU7yflyvkc2bTi19RucoBR8iq5AAAAABJRU5ErkJggg=="/>\n      <h1>We\'ll be back soon</h1>\n      <p>We are currently performing some maintenance.</p>\n    </body>\n  </html>\n`;\n\nconst allowedIps = [\'<your-ip>\'];\n\nexport default {\n  async fetch(request, env) {\n\n    // Allow requests for developers.\n    if (allowedIps.includes(request.headers.get(\'cf-connecting-ip\'))) {\n      return fetch(request);\n    }\n\n    // Everyone else gets the maintenance page.\n    const headers = new Headers();\n    headers.set(\'Content-type\', \'text/html\');\n    headers.append(\'Pragma\', \'no-cache\');\n\n    return new Response(html(request.headers.get(\'cf-connecting-ip\'), request.url), {\n      status: 503,\n      headers\n    });\n  }\n}\n            ',language:"javascript"}))}},ZHtn:function(A,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/patterns/cloudflare",function(){return n("A9qX")}])},h1bS:function(A,e,n){"use strict";var t=n("MX0m"),a=n.n(t),r=n("q1tI"),s=n.n(r),i=s.a.createElement;e.a=function(A){var e=A.children;return i(s.a.Fragment,null,i("h2",{className:"jsx-1083602474 heading"},e),i(a.a,{id:"1083602474"},[".heading.jsx-1083602474{text-transform:uppercase;font-weight:600;}"]))}},twr1:function(A,e,n){"use strict";var t=n("bzaZ");e.a=t.a}},[["ZHtn",0,2,5,1,3,4]]]);